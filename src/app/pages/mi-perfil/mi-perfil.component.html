<div class="profile-container">
  
  <!-- Header del perfil simplificado -->
  <div class="profile-header">
    <button class="back-btn" (click)="volverAlDashboard()">
      <i class="fas fa-arrow-left"></i>
      <span>Volver</span>
    </button>
    
    <div class="header-content">
      <div class="avatar-section">
        <div class="avatar">
          <i class="fas fa-user"></i>
        </div>
      </div>
      
      <div class="header-info">
        <h1>{{ currentPatient?.datosPersonales?.nombreCompleto || 'Mi Perfil' }}</h1>
        <p class="patient-role">
          <i class="fas fa-user-circle"></i>
          Paciente de FonoKids
        </p>
        <div class="age-badge" *ngIf="edadCalculada > 0">
          <i class="fas fa-birthday-cake"></i>
          {{ edadCalculada }} años
        </div>
      </div>
    </div>
    
    <div class="header-actions">
      <button 
        class="save-btn" 
        [class.saving]="isSaving"
        (click)="saveProfile()"
        [disabled]="!profileForm.dirty || isSaving">
        <i class="fas fa-save"></i>
        {{ isSaving ? 'Guardando...' : 'Guardar Cambios' }}
      </button>
    </div>
  </div>

  <!-- Formulario de perfil -->
  <div class="profile-content">
    <form [formGroup]="profileForm" class="profile-form">
      
      <!-- ÚNICA SECCIÓN: Información Personal -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <i class="fas fa-user-circle"></i>
          </div>
          <h2>Información Personal</h2>
        </div>

        <div class="form-grid">
          <!-- Nombre Completo -->
          <div class="form-group full-width">
            <label>
              <i class="fas fa-user"></i>
              Nombre Completo *
            </label>
            <input 
              type="text" 
              formControlName="nombreCompleto"
              class="form-control"
              [class.error]="hasFieldError('nombreCompleto')"
              placeholder="Ingresa tu nombre completo">
            <div class="error-message" *ngIf="hasFieldError('nombreCompleto')">
              <i class="fas fa-exclamation-circle"></i>
              {{ getFieldError('nombreCompleto') }}
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <label>
              <i class="fas fa-envelope"></i>
              Correo Electrónico
            </label>
            <input 
              type="email" 
              formControlName="email"
              class="form-control"
              [class.error]="hasFieldError('email')"
              placeholder="correo@ejemplo.com">
            <div class="error-message" *ngIf="hasFieldError('email')">
              <i class="fas fa-exclamation-circle"></i>
              {{ getFieldError('email') }}
            </div>
          </div>

          <!-- Fecha de Nacimiento -->
          <div class="form-group">
            <label>
              <i class="fas fa-calendar-alt"></i>
              Fecha de Nacimiento *
            </label>
            <input 
              type="date" 
              formControlName="fechaNacimiento"
              class="form-control"
              [class.error]="hasFieldError('fechaNacimiento')"
              (change)="calculateAge()">
            <div class="error-message" *ngIf="hasFieldError('fechaNacimiento')">
              <i class="fas fa-exclamation-circle"></i>
              {{ getFieldError('fechaNacimiento') }}
            </div>
          </div>

          <!-- Sexo -->
          <div class="form-group">
            <label>
              <i class="fas fa-venus-mars"></i>
              Sexo
            </label>
            <select formControlName="sexo" class="form-control">
              <option value="Masculino">Masculino</option>
              <option value="Femenino">Femenino</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <!-- Número de Documento -->
          <div class="form-group">
            <label>
              <i class="fas fa-id-card"></i>
              Número de Documento
            </label>
            <input 
              type="text" 
              formControlName="numeroDocumento"
              class="form-control"
              placeholder="Cédula de identidad">
          </div>

          <!-- Teléfono Principal -->
          <div class="form-group">
            <label>
              <i class="fas fa-phone"></i>
              Teléfono Principal
            </label>
            <input 
              type="tel" 
              formControlName="telefonoPrincipal"
              class="form-control"
              placeholder="+595 981 123456">
          </div>

          <!-- Teléfono Secundario -->
          <div class="form-group">
            <label>
              <i class="fas fa-mobile-alt"></i>
              Teléfono Secundario
            </label>
            <input 
              type="tel" 
              formControlName="telefonoSecundario"
              class="form-control"
              placeholder="+595 981 654321">
          </div>

          <!-- Dirección -->
          <div class="form-group full-width">
            <label>
              <i class="fas fa-map-marker-alt"></i>
              Dirección
            </label>
            <input 
              type="text" 
              formControlName="direccion"
              class="form-control"
              placeholder="Tu dirección completa">
          </div>
        </div>

        <!-- Información adicional -->
        <div class="info-box">
          <i class="fas fa-info-circle"></i>
          <div class="info-content">
            <strong>Recuerda:</strong> Los campos marcados con (*) son obligatorios. 
            Mantén tu información actualizada para una mejor experiencia.
          </div>
        </div>
      </div>

    </form>
  </div>

  <!-- Mensaje de estado -->
  <div *ngIf="statusMessage" class="status-message" [ngClass]="statusType">
    <i [class]="statusType === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'"></i>
    <span>{{ statusMessage }}</span>
  </div>

</div>