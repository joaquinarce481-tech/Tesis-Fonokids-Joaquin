<!-- src/app/components/faq-modal/faq-modal.component.html -->

<div class="faq-modal-overlay" *ngIf="isVisible" (click)="onClose()">
  <div class="faq-modal" (click)="$event.stopPropagation()">
    
    <!-- Header -->
    <div class="faq-header">
      <div class="faq-header-content">
        <div class="faq-icon">‚ùì</div>
        <div>
          <h2>Preguntas Frecuentes</h2>
          <p>Conoce todas las funciones de FonoKids</p>
        </div>
      </div>
      <button class="faq-close-btn" (click)="onClose()">‚úï</button>
    </div>

    <!-- Contenido -->
    <div class="faq-content">
      
      <!-- Categor√≠as -->
      <div class="faq-categories-wrapper">
        <div class="faq-categories">
          <button 
            *ngFor="let category of faqCategories; let i = index"
            class="category-btn"
            [class.active]="selectedCategoryIndex === i"
            (click)="selectCategory(i)">
            <span>{{ category.icon }}</span>
            <span>{{ category.name }}</span>
          </button>
        </div>
      </div>

      <!-- Preguntas -->
      <div class="faq-questions">
        <div 
          *ngFor="let question of getSelectedQuestions(); let idx = index" 
          class="faq-question-item"
          [class.expanded]="question.isExpanded">
          
          <!-- Header de pregunta -->
          <div class="question-header" (click)="selectQuestion(question)">
            <div class="question-content">
              <div class="question-text">{{ question.text }}</div>
              <div class="question-description">{{ question.description }}</div>
            </div>
            <div class="question-arrow" [class.rotated]="question.isExpanded">‚ñº</div>
          </div>

          <!-- ‚úÖ RESPUESTA - USANDO [hidden] EN LUGAR DE *ngIf -->
          <div class="question-answer" [hidden]="!question.isExpanded">
            <div class="answer-box">
              <p>{{ question.answer }}</p>
            </div>
            <button class="send-btn" (click)="sendQuestionToChat(question); $event.stopPropagation()">
              üí¨ Preguntar m√°s a FonoBot
            </button>
          </div>

        </div>
      </div>

      <!-- Footer -->
      <div class="faq-footer">
        <button class="chat-libre-btn" (click)="openFreeChat()">
          <span class="chat-icon">ü§ñ</span>
          <div>
            <div class="btn-title">¬øTIENES M√ÅS DUDAS?</div>
            <div class="btn-subtitle">Chatea libremente con FonoBot</div>
          </div>
          <span>‚Üí</span>
        </button>
      </div>
    </div>
  </div>
</div>