<div class="orofacial-container">
  <div class="exercise-card">
    <div class="exercise-header">
      <h2>{{ currentExercise.name }}</h2>
      <div class="exercise-controls">
        <button (click)="previousExercise()" class="btn-nav">â†</button>
        <button (click)="retryExercise()" class="btn-retry">Â¡IntÃ©ntalo de nuevo!</button>
        <button (click)="nextExercise()" class="btn-nav">â†’</button>
      </div>
    </div>

    <p class="exercise-instruction">{{ currentExercise.instruction }}</p>

    <div class="progress-container">

      <div #progressBarElement class="progress-bar detecting">
        <div class="progress-fill"></div>
      </div>


      <div #progressStatusElement class="progress-status">
        <span class="status-searching">ğŸ” Buscando rostro...</span>
      </div>
    </div>
  </div>


  <div class="video-container">
    <video #videoElement class="input-video" playsinline autoplay muted></video>
    <canvas #canvasElement class="output-canvas" width="640" height="480"></canvas>


    <div class="video-overlay" *ngIf="!isRecording">
      <div class="overlay-content">
        <p>Presiona "Iniciar AnÃ¡lisis" para comenzar</p>
      </div>
    </div>
  </div>

  <div class="controls">
    <button (click)="toggleCamera()" [class.active]="isRecording" class="btn-primary">
      <span *ngIf="!isRecording">ğŸ¥ Iniciar AnÃ¡lisis</span>
      <span *ngIf="isRecording">â¹ï¸ Detener AnÃ¡lisis</span>
    </button>
  </div>

  <div class="metrics-simple" *ngIf="isRecording">
    <div class="metric-badge" [class.active]="currentExercise.targetMetric === 'lipAperture'">
      <span class="metric-icon">ğŸ‘„</span>
      <span class="metric-value">{{ orofacialMetrics.lipAperture | number:'1.0-0' }}%</span>
    </div>
    <div class="metric-badge" [class.active]="currentExercise.targetMetric === 'facialSymmetry'">
      <span class="metric-icon">ğŸ˜Š</span>
      <span class="metric-value">{{ orofacialMetrics.facialSymmetry | number:'1.0-0' }}%</span>
    </div>
  </div>
</div>