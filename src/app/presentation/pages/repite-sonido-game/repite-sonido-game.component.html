<div class="juego-container">
  
  <!-- Header -->
  <header class="juego-header">
    <button class="btn-volver" (click)="volverAlMenu()">
      <span class="icono-flecha">â†</span>
      <span>Volver</span>
    </button>
    
    <div class="header-info">
      <h1>ğŸ¤ Repite el Sonido</h1>
      <p>Escucha y repite correctamente</p>
    </div>
  </header>

  <!-- Contenido principal -->
  <main class="juego-main" *ngIf="ejercicioActual">
    
    <!-- Tarjeta del ejercicio -->
    <div class="ejercicio-card">
      
      <!-- CategorÃ­a -->
      <div class="categoria-badge" [ngClass]="ejercicioActual.categoria">
        {{ ejercicioActual.categoria === 'fonema' ? 'ğŸ”¤ Fonema' : 
           ejercicioActual.categoria === 'silaba' ? 'ğŸ“ SÃ­laba' : 'ğŸ“– Palabra' }}
      </div>

      <!-- Texto grande a repetir -->
      <div class="texto-grande">
        {{ ejercicioActual.texto }}
      </div>

      <!-- BotÃ³n para escuchar -->
      <button class="btn-escuchar" (click)="reproducirTexto()">
        <span class="icono">ğŸ”Š</span>
        <span>Escuchar</span>
      </button>

      <!-- Ãrea de grabaciÃ³n -->
      <div class="grabacion-area">
        <button 
          class="btn-grabar" 
          [class.recording]="isRecording"
          [disabled]="isProcessing"
          (click)="isRecording ? detenerGrabacion() : iniciarGrabacion()">
          <span class="icono-mic">ğŸ¤</span>
          <span>{{ isRecording ? 'Detener GrabaciÃ³n' : 'Grabar mi voz' }}</span>
        </button>

        <!-- Indicador de grabaciÃ³n -->
        <div class="recording-indicator" *ngIf="isRecording">
          <div class="pulse"></div>
          <span>Grabando...</span>
        </div>

        <!-- BotÃ³n para escuchar mi grabaciÃ³n -->
        <button 
          class="btn-escuchar-grabacion" 
          *ngIf="audioUrl && !isRecording"
          (click)="escucharMiGrabacion()">
          <span class="icono">ğŸ§</span>
          <span>Escuchar mi grabaciÃ³n</span>
        </button>
      </div>

      <!-- Feedback -->
      <div 
        class="feedback-message" 
        *ngIf="feedback"
        [ngClass]="feedbackType">
        {{ feedback }}
      </div>

    </div>

    <!-- NavegaciÃ³n -->
    <div class="navegacion">
      <button 
        class="btn-nav" 
        (click)="anteriorEjercicio()"
        [disabled]="ejercicioIndex === 0">
        â† Anterior
      </button>
      
      <span class="contador">
        {{ ejercicioIndex + 1 }} / {{ ejercicios.length }}
      </span>
      
      <button 
        class="btn-nav" 
        (click)="siguienteEjercicio()">
        Siguiente â†’
      </button>
    </div>

  </main>

</div>