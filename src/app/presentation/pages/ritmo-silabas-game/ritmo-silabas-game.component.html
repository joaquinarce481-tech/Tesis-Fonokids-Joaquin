<div class="game-container">
  
  <!-- Header del juego -->
  <header class="game-header">
    <div class="header-content">
      <button class="btn-back" (click)="volverAJuegos()">
        <span class="back-icon">â†</span>
        <span>Volver</span>
      </button>
      
      <div class="game-info">
        <h1>ğŸƒâ€â™‚ï¸ Carrera de SÃ­labas</h1>
        <p>Â¡Pronuncia las sÃ­labas para saltar!</p>
      </div>
      
      <div class="game-stats">
        <div class="stat">
          <span class="stat-label">âœ…</span>
          <span class="stat-value">{{ palabrasCorrectas }}/25</span>
        </div>
        <div class="stat">
          <span class="stat-label">ğŸ“</span>
          <span class="stat-value">{{ formatearDistancia() }}</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Pantalla de instrucciones -->
  <div *ngIf="faseJuego === 'instrucciones'" class="instructions-screen">
    <div class="instructions-card">
      <div class="instructions-header">
        <h2>ğŸƒâ€â™‚ï¸ Â¿CÃ³mo jugar?</h2>
        <div class="game-icon">ğŸ®</div>
      </div>
      
      <div class="instructions-content">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-text">
            <strong>ğŸ¤ Activa tu micrÃ³fono</strong>
            <p>El juego necesita escuchar tu voz. Acepta el permiso cuando te lo pida.</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-text">
            <strong>ğŸ‘€ Observa el obstÃ¡culo que viene</strong>
            <p>VerÃ¡s una sÃ­laba dentro de una tarjeta blanca (por ejemplo: TA, MA, PA). Â¡MÃ­rala con atenciÃ³n!</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-text">
            <strong>ğŸ—£ï¸ Di la sÃ­laba O una palabra que la contenga</strong>
            <p>Puedes decir solo "TA" o una palabra como "TAZA", "TAPA", "TOMATE". Â¡Cualquier palabra que tenga esa sÃ­laba funciona!</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-text">
            <strong>â¬†ï¸ Tu personaje saltarÃ¡ automÃ¡ticamente</strong>
            <p>Si pronuncias correctamente, tu personaje ğŸƒâ€â™‚ï¸ saltarÃ¡ solo. Si no pronuncias, chocarÃ¡ con el obstÃ¡culo.</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">5</div>
          <div class="step-text">
            <strong>ğŸ” Â¡Sigue practicando!</strong>
            <p>El juego nunca termina. Es para practicar sin presiÃ³n. Â¡Pronuncia todas las sÃ­labas que puedas!</p>
          </div>
        </div>
      </div>
      
      <div class="controls-guide">
        <h3>ğŸ¯ Ejemplos de sÃ­labas:</h3>
        <div class="syllables-examples">
          <div class="syllable-example" *ngFor="let silaba of silabasDisponibles.slice(0, 8)">
            <span class="example-emoji">{{ emojisPorSilaba[silaba] }}</span>
            <span class="example-text">{{ silaba }}</span>
          </div>
        </div>
      </div>
      
      <div class="tips-section">
        <h3>ğŸ’¡ Consejos importantes:</h3>
        <ul>
          <li><strong>Puedes decir palabras completas</strong> - Por ejemplo, para "TO" puedes decir "TORO", "TOMATE", "TOPO"</li>
          <li><strong>Di la palabra APENAS VEAS el obstÃ¡culo</strong> - No esperes a que estÃ© cerca de tu personaje</li>
          <li>Habla <strong>claro y fuerte</strong> para que el micrÃ³fono te detecte bien</li>
          <li>TambiÃ©n puedes usar la tecla <strong>ESPACIO</strong> para saltar (como alternativa)</li>
          <li><strong>Mira el panel izquierdo</strong> - Te muestra ejemplos de palabras que puedes decir</li>
          <li>Si chocas, Â¡no pasa nada! Sigue intentando con el prÃ³ximo obstÃ¡culo</li>
        </ul>
      </div>
      
      <button class="btn-start" (click)="empezarJuego()">
        Â¡Comenzar Carrera! ğŸƒâ€â™‚ï¸
      </button>
    </div>
  </div>

  <!-- Pantalla principal del juego -->
  <div *ngIf="faseJuego === 'jugando' || faseJuego === 'pausado'" class="game-main">
    
    <!-- Indicador de voz mejorado -->
    <div class="voice-indicator" 
         [class.listening]="escuchandoVoz"
         [class.success]="ultimaPalabraDetectada.includes('âœ…')"
         [class.error]="ultimaPalabraDetectada.includes('âŒ')">
      <div class="mic-icon">ğŸ¤</div>
      <div class="voice-status">
        <span *ngIf="escuchandoVoz && !ultimaPalabraDetectada">Escuchando...</span>
        <span *ngIf="!escuchandoVoz">MicrÃ³fono apagado</span>
      </div>
      <div class="last-word" *ngIf="ultimaPalabraDetectada">
        {{ ultimaPalabraDetectada }}
      </div>
    </div>

    <!-- Indicador de prÃ³xima sÃ­laba mejorado -->
    <div class="next-syllable-indicator" *ngIf="obstaculos.length > 0">
      <div class="next-label">PrÃ³xima sÃ­laba:</div>
      <div class="next-syllable">
        <span class="next-emoji">{{ obstaculos[0].emoji }}</span>
        <span class="next-text">{{ obstaculos[0].silaba }}</span>
      </div>
      <div class="next-hint">ğŸ‘† Â¡Di "{{ obstaculos[0].silaba }}"!</div>
      <div class="word-examples">
        <span class="example-label">Ejemplos:</span>
        <span class="example-words">{{ obtenerEjemplos(obstaculos[0].silaba) }}</span>
      </div>
    </div>

    <!-- Ãrea de juego -->
    <div class="game-area">
      
      <!-- Fondo animado -->
      <div class="background-layer"></div>
      
      <!-- Suelo -->
      <div class="ground"></div>
      
      <!-- Jugador -->
      <div class="player" 
           [class.jumping]="jugadorSaltando"
           [style.bottom.px]="jugadorY - suelo">
        <div class="player-character">ğŸƒâ€â™‚ï¸</div>
      </div>
      
      <!-- ObstÃ¡culos -->
      <div class="obstacle" 
           *ngFor="let obs of obstaculos"
           [class.inactive]="!obs.activo"
           [class.superado]="obs.superado && obs.activo"
           [style.left.px]="obs.posicionX">
        <div class="obstacle-content">
          <div class="obstacle-emoji">{{ obs.emoji }}</div>
          <div class="obstacle-syllable">{{ obs.silaba }}</div>
        </div>
      </div>
      
      <!-- PartÃ­culas -->
      <div class="particle"
           *ngFor="let part of particulas"
           [style.left.px]="part.x"
           [style.top.px]="part.y"
           [style.background-color]="part.color"
           [style.opacity]="part.vida / 30">
      </div>
      
    </div>

    <!-- Panel de pausa -->
    <div *ngIf="faseJuego === 'pausado'" class="pause-overlay">
      <div class="pause-content">
        <h2>â¸ï¸ Juego Pausado</h2>
        <div class="pause-actions">
          <button class="btn-primary" (click)="reanudarJuego()">
            â–¶ï¸ Continuar
          </button>
          <button class="btn-secondary" (click)="reiniciarJuego()">
            ğŸ”„ Reiniciar
          </button>
          <button class="btn-outline" (click)="volverAJuegos()">
            ğŸ  Salir
          </button>
        </div>
      </div>
    </div>

    <!-- BotÃ³n de pausa -->
    <button *ngIf="faseJuego === 'jugando'" class="btn-pause" (click)="pausarJuego()">
      â¸ï¸
    </button>

  </div>

  <!-- Modal de FelicitaciÃ³n -->
  <div *ngIf="mostrarModalFelicitacion" class="felicitacion-overlay">
    <div class="felicitacion-modal">
      <div class="confetti-container">
        <div class="confetti">ğŸ‰</div>
        <div class="confetti">ğŸŒŸ</div>
        <div class="confetti">â­</div>
        <div class="confetti">âœ¨</div>
        <div class="confetti">ğŸŠ</div>
      </div>
      
      <div class="felicitacion-content">
        <div class="felicitacion-icon">ğŸ†</div>
        <h2 class="felicitacion-title">Â¡Felicitaciones!</h2>
        <p class="felicitacion-message">
          Â¡Has completado <strong>25 sÃ­labas</strong> correctamente!
        </p>
        <p class="felicitacion-submessage">
          Â¡Excelente pronunciaciÃ³n! Sigue asÃ­ ğŸ’ª
        </p>
        
        <div class="felicitacion-stats-mini">
          <div class="stat-mini">
            <span class="stat-mini-icon">âœ…</span>
            <span class="stat-mini-value">{{ palabrasCorrectas }}</span>
            <span class="stat-mini-label">Correctas</span>
          </div>
          <div class="stat-mini">
            <span class="stat-mini-icon">ğŸ“</span>
            <span class="stat-mini-value">{{ formatearDistancia() }}</span>
            <span class="stat-mini-label">Distancia</span>
          </div>
        </div>
        
        <div class="felicitacion-actions">
          <button class="btn-continuar" (click)="continuarJugando()">
            <span class="btn-icon">ğŸ®</span>
            Â¡Seguir Jugando!
          </button>
          <button class="btn-terminar" (click)="terminarJuego()">
            <span class="btn-icon">ğŸ </span>
            Volver al MenÃº
          </button>
        </div>
      </div>
    </div>
  </div>

  </div>

