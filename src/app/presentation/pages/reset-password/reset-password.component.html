<div class="login-wrapper">
  <!-- Elementos flotantes decorativos -->
  <div class="floating-elements">
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="heart"></div>
    <div class="heart"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
  </div>
  
  <!-- TÃ­tulo de bienvenida -->
  <h1 class="titulo-bienvenida">NUEVA CONTRASEÃ‘A</h1>
  
  <div class="login-box">
    <!-- Mascota -->
    <div class="mascot">ğŸ”</div>
    
    <p class="subtitle">
      Â¡Perfecto! Tu cÃ³digo fue verificado. <br>
      Ahora crea tu nueva contraseÃ±a segura.
    </p>
    
    <!-- Formulario -->
    <form (ngSubmit)="cambiarContrasena()" #resetForm="ngForm">
      
      <div class="input-group">
        <input 
          type="password"
          placeholder="Nueva contraseÃ±a"
          [(ngModel)]="newPassword"
          name="newPassword"
          required
          minlength="6"
          [disabled]="isLoading"
          (input)="onPasswordChange()"
        />
        <div class="input-icon">ğŸ”’</div>
      </div>
      
      <div class="input-group">
        <input 
          type="password"
          placeholder="Confirmar contraseÃ±a"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          required
          minlength="6"
          [disabled]="isLoading"
          (input)="onPasswordChange()"
        />
        <div class="input-icon">âœ…</div>
      </div>
      
      <!-- Indicador de fortaleza de contraseÃ±a -->
      <div class="password-strength" *ngIf="newPassword.length > 0">
        <div class="strength-label">Fortaleza de contraseÃ±a:</div>
        <div class="strength-bar">
          <div 
            class="strength-fill" 
            [ngClass]="getStrengthClass()"
            [style.width.%]="getStrengthPercentage()">
          </div>
        </div>
        <div class="strength-text" [ngClass]="getStrengthClass()">
          {{ getStrengthText() }}
        </div>
      </div>
      
      <!-- Validaciones de contraseÃ±a -->
      <div class="password-rules" *ngIf="newPassword.length > 0">
        <div class="rule" [ngClass]="{'valid': newPassword.length >= 6}">
          <span class="rule-icon">{{ newPassword.length >= 6 ? 'âœ…' : 'âŒ' }}</span>
          MÃ­nimo 6 caracteres
        </div>
        <div class="rule" [ngClass]="{'valid': hasUpperCase()}">
          <span class="rule-icon">{{ hasUpperCase() ? 'âœ…' : 'âŒ' }}</span>
          Al menos una mayÃºscula
        </div>
        <div class="rule" [ngClass]="{'valid': hasNumber()}">
          <span class="rule-icon">{{ hasNumber() ? 'âœ…' : 'âŒ' }}</span>
          Al menos un nÃºmero
        </div>
        <div class="rule" [ngClass]="{'valid': passwordsMatch()}">
          <span class="rule-icon">{{ passwordsMatch() ? 'âœ…' : 'âŒ' }}</span>
          Las contraseÃ±as coinciden
        </div>
      </div>
      
      <!-- Mostrar mensaje de error si existe -->
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>
      
      <!-- Mostrar mensaje de Ã©xito si existe -->
      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
      </div>
      
      <!-- BotÃ³n cambiar contraseÃ±a -->
      <button 
        type="submit"
        [disabled]="isLoading || !isFormValid()"
        class="login-button"
      >
        <span *ngIf="!isLoading">ğŸ”„ Cambiar contraseÃ±a</span>
        <span *ngIf="isLoading">Cambiando... â³</span>
      </button>
      
      <!-- BotÃ³n volver -->
      <button 
        type="button"
        (click)="volver()"
        class="back-button"
        [disabled]="isLoading"
      >
        â† Volver
      </button>
    </form>
    
    <p class="help-text">
      Usa una contraseÃ±a fuerte que incluya mayÃºsculas, nÃºmeros y sea fÃ¡cil de recordar para ti.
    </p>
  </div>
</div>
