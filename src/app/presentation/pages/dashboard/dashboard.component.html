<!-- dashboard.component.html -->

<div class="dashboard-container" [class.dark-mode]="isDarkMode">
  <!-- Header con informaciÃ³n del usuario -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="user-info">
        <div class="user-menu-container">
          <div class="user-avatar" 
               [class.active]="showUserMenu"
               (click)="toggleUserMenu()">
            <img src="assets/images/user-avatar.jpg"
                 alt="JoaquÃ­n Arce"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <span class="avatar-fallback" style="display: none;">ğŸ‘¤</span>
          </div>
          
          <!-- MenÃº desplegable -->
          <div class="user-dropdown" [class.show]="showUserMenu">
            <div class="dropdown-header">
              <h4>JoaquÃ­n Arce</h4>
              <p>Paciente</p>
            </div>
            
            <div class="dropdown-menu">
              <button class="dropdown-item" (click)="goToProfile()">
                <span class="dropdown-icon">ğŸ‘¤</span>
                Mi Perfil
              </button>
              
              <button class="dropdown-item" (click)="goToSettings()">
                <span class="dropdown-icon">âš™ï¸</span>
                ConfiguraciÃ³n
              </button>
              
              <button class="dropdown-item" (click)="goToHelp()">
                <span class="dropdown-icon">â“</span>
                Ayuda
              </button>
              
              <button class="dropdown-item logout" (click)="logout()">
                <span class="dropdown-icon">ğŸšª</span>
                Cerrar SesiÃ³n
              </button>
            </div>
          </div>
          
          <div class="dropdown-overlay" 
               *ngIf="showUserMenu" 
               (click)="closeUserMenu()">
          </div>
        </div>
        
        <div class="user-details">
          <h1>JoaquÃ­n Arce</h1>
          <p>{{ getGreeting() }}</p>
        </div>
      </div>
      
      <!-- BotÃ³n de modo oscuro -->
      <div class="stat-item">
        <button class="theme-toggle" (click)="toggleDarkMode()" [title]="isDarkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
          <span class="theme-icon">{{ isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™' }}</span>
        </button>
        <p>Tema</p>
      </div>
    </div>
  </header>
  
  <!-- Contenido principal -->
  <main class="dashboard-main">
    <div class="main-title">
      <h2>Â¿QuÃ© quieres hacer hoy?</h2>
      <p>Selecciona una opciÃ³n del menÃº para comenzar tu aventura ğŸš€</p>
    </div>

    <div class="menu-grid">
      <div 
        *ngFor="let item of menuItems"
        class="menu-item"
        [class.selected]="selectedItem === item.id"
        [ngClass]="'bg-gradient-' + item.color"
        (click)="handleItemClick(item)">
        
        <div class="menu-image"></div>
        
        <div class="menu-content">
          <div class="menu-header">
            <div class="menu-emoji">{{ item.emoji }}</div>
            <div class="menu-icon">ğŸ“‹</div>
          </div>
          
          <h3>{{ item.title }}</h3>
          <p class="menu-subtitle">{{ item.subtitle }}</p>
          <p class="menu-description">{{ item.description }}</p>
        </div>

        <div *ngIf="selectedItem === item.id" class="selection-indicator"></div>
      </div>
    </div>

    <div class="motivational-message">
      <div class="message-emoji">ğŸŒŸ</div>
      <h3>Â¡Cada dÃ­a eres mejor!</h3>
      <p>Recuerda: practicar un poquito cada dÃ­a te ayuda a mejorar muchÃ­simo. Â¡TÃº puedes!</p>
    </div>
  </main>
</div>

<!-- âœ… BOTÃ“N FLOTANTE CON MENSAJE AL LADO -->
<div class="floating-help-container">
  <!-- Mensaje al lado del botÃ³n -->
  <div class="floating-message">
    Preguntas frecuentes
  </div>
  
  <!-- BotÃ³n flotante -->
  <button class="floating-mascot" 
          (click)="goToHelp()"
          style="position: relative !important; 
                 width: 60px !important; 
                 height: 60px !important; 
                 background: #25d366 !important; 
                 border: none !important;
                 border-radius: 50% !important; 
                 color: white !important; 
                 font-size: 2rem !important; 
                 cursor: pointer !important; 
                 z-index: 999999 !important; 
                 box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4) !important;
                 display: flex !important;
                 align-items: center !important;
                 justify-content: center !important;">
    â“
  </button>
</div>

<!-- âœ… AGREGAR EL COMPONENTE FAQ MODAL -->
<app-faq-modal 
  [isVisible]="showFaqModal"
  (closeModal)="closeFaqModal()">
</app-faq-modal>