<!-- dashboard.component.html - VERSI√ìN FINAL CON CAROUSEL Y SECCI√ìN ABOUT -->

<div class="dashboard-container" [class.dark-mode]="isDarkMode">
  <!-- Header con informaci√≥n del usuario -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="user-info">
        <div class="user-menu-container">
          <div class="user-avatar" 
               [class.active]="showUserMenu"
               (click)="toggleUserMenu()">
            <img src="assets/images/user-avatar.jpg"
                 [alt]="userName"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <span class="avatar-fallback" style="display: none;">üë§</span>
          </div>
          
          <!-- Men√∫ desplegable -->
          <div class="user-dropdown" [class.show]="showUserMenu">
            <div class="dropdown-header">
              <h4>{{ userName }}</h4>
              <p>Paciente</p>
            </div>
            
            <div class="dropdown-menu">
              <button class="dropdown-item" (click)="goToProfile()">
                <span class="dropdown-icon"></span>
                Mi Perfil
              </button>
              
              <button class="dropdown-item" (click)="goToHelp()">
                <span class="dropdown-icon"></span>
                Ayuda
              </button>
              
              <button class="dropdown-item logout" (click)="showLogoutConfirmation()">
                <span class="dropdown-icon"></span>
                Cerrar Sesi√≥n
              </button>
            </div>
          </div>
          
          <div class="dropdown-overlay" 
               *ngIf="showUserMenu" 
               (click)="closeUserMenu()">
          </div>
        </div>
        
        <div class="user-details">
          <h1>{{ userName }}</h1>
          <p>{{ getGreeting() }}</p>
        </div>
      </div>
      
      <!-- Bot√≥n de modo oscuro -->
      <div class="stat-item">
        <button class="theme-toggle" (click)="toggleDarkMode()" [title]="isDarkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
          <span class="theme-icon">{{ isDarkMode ? '‚òÄÔ∏è' : 'üåô' }}</span>
        </button>
        <p>Tema</p>
      </div>
    </div>
  </header>

  <!-- HERO CAROUSEL SECTION -->
  <section class="hero-carousel-section">
    <div class="carousel-container">
      <!-- Bot√≥n Anterior -->
      <button class="carousel-control prev" (click)="previousSlide()" [disabled]="isTransitioning">
        <span class="control-icon">‚ùÆ</span>
      </button>

      <!-- Slides -->
      <div class="carousel-wrapper">
        <div class="carousel-slide" [class.active]="currentSlide === 0">
          <div class="slide-background" 
               style="background-image: url('assets/images/hero-slide-1.jpg')"></div>
          <div class="slide-content">
            <span class="slide-tag">NUEVO ENFOQUE</span>
            <h1 class="slide-title">Tu Viaje Hacia una<br><span class="highlight">Mejor Comunicaci√≥n</span></h1>
            <p class="slide-description">
              Ejercicios personalizados y divertidos que te ayudar√°n a mejorar tu habla d√≠a a d√≠a
            </p>
            <div class="slide-buttons">
              <button class="btn-primary" (click)="handleItemClick(menuItems[1])">
                COMENZAR AHORA
              </button>
              <button class="btn-secondary" (click)="handleItemClick(menuItems[2])">
                VER JUEGOS
              </button>
            </div>
          </div>
        </div>

        <div class="carousel-slide" [class.active]="currentSlide === 1">
          <div class="slide-background" 
               style="background-image: url('assets/images/ImagenCarouselDashboard.png')"></div>
          <div class="slide-content">
            <span class="slide-tag">PR√ÅCTICA DIVERTIDA</span>
            <h1 class="slide-title">Aprende Jugando con<br><span class="highlight">Juegos Terap√©uticos</span></h1>
            <p class="slide-description">
              Juegos especialmente dise√±ados para fortalecer los m√∫sculos de tu boca mientras te diviertes
            </p>
            <div class="slide-buttons">
              <button class="btn-primary" (click)="handleItemClick(menuItems[2])">
                JUGAR AHORA
              </button>
              <button class="btn-secondary" (click)="handleItemClick(menuItems[3])">
                HABLAR CON TU ASISTENTE
              </button>
            </div>
          </div>
        </div>

        <div class="carousel-slide" [class.active]="currentSlide === 2">
          <div class="slide-background" 
               style="background-image: url('assets/images/hero-slide-2.jpg')"></div>
          <div class="slide-content">
            <span class="slide-tag">ASISTENTE INTELIGENTE</span>
            <h1 class="slide-title">Tu Asistente<br><span class="highlight">y Compa√±ero de Pr√°ctica</span></h1>
            <p class="slide-description">
              Practica conversaciones y mejora tu pronunciaci√≥n con nuestro asistente de inteligencia artificial
            </p>
            <div class="slide-buttons">
              <button class="btn-primary" (click)="handleItemClick(menuItems[3])">
                CHATEAR CON TU ASISTENTE
              </button>
              <button class="btn-secondary" (click)="handleItemClick(menuItems[1])">
                VER EJERCICIOS
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Bot√≥n Siguiente -->
      <button class="carousel-control next" (click)="nextSlide()" [disabled]="isTransitioning">
        <span class="control-icon">‚ùØ</span>
      </button>

      <!-- Indicadores -->
      <div class="carousel-indicators">
        <button 
          *ngFor="let slide of carouselSlides; let i = index"
          class="indicator"
          [class.active]="currentSlide === i"
          (click)="goToSlide(i)"
          [disabled]="isTransitioning">
        </button>
      </div>
    </div>
  </section>
  
  <!-- Contenido principal con las tarjetas -->
  <main class="dashboard-main">
    <div class="main-title">
      <h2>¬øQu√© quieres hacer hoy?</h2>
      <p>Selecciona una opci√≥n del men√∫ para comenzar tu aventura</p>
    </div>

    <!-- Grid de tarjetas -->
    <div class="menu-grid">
      <div 
        *ngFor="let item of menuItems"
        class="menu-item"
        [class.selected]="selectedItem === item.id"
        [ngClass]="'bg-gradient-' + item.color"
        (click)="handleItemClick(item)">
        
        <div class="menu-image"></div>
        
        <div class="menu-content">
          <div class="menu-header">
            <div class="menu-emoji">{{ item.emoji }}</div>
            <div class="menu-icon">üìã</div>
          </div>
          
          <h3>{{ item.title }}</h3>
          <p class="menu-subtitle">{{ item.subtitle }}</p>
          <p class="menu-description">{{ item.description }}</p>
        </div>

        <div *ngIf="selectedItem === item.id" class="selection-indicator"></div>
      </div>
    </div>

    <!-- NUEVA SECCI√ìN ABOUT CON IMAGEN DE NI√ëA -->
    <section class="about-section">
      <div class="about-container">
        <div class="about-content">
          <div class="about-badge">¬øPARA QUE SIRVE EL SOFTWARE?</div>
          <h2 class="about-title">Fonoaudiolog√≠a Especializada para Ni√±os</h2>
          <p class="about-description">
            Creamos un ambiente divertido y seguro donde los ni√±os aprenden mientras juegan. 
            Nuestro m√©todo combina ejercicios terap√©uticos profesionales con actividades 
            interactivas dise√±adas espec√≠ficamente para mejorar el habla y la comunicaci√≥n.
          </p>
          <ul class="about-features">
            <li>
              <span class="feature-icon">‚úì</span>
              <span>Ejercicios personalizados seg√∫n el nivel de cada ni√±o</span>
            </li>
            <li>
              <span class="feature-icon">‚úì</span>
              <span>Seguimiento profesional por fonoaudi√≥logos certificados</span>
            </li>
            <li>
              <span class="feature-icon">‚úì</span>
              <span>Juegos terap√©uticos que hacen el aprendizaje divertido</span>
            </li>
            <li>
              <span class="feature-icon">‚úì</span>
              <span>Tecnolog√≠a de IA para pr√°ctica y retroalimentaci√≥n instant√°nea</span>
            </li>
          </ul>
          <button class="about-cta-button" (click)="goToFonoBot()">
            ¬øTIENES M√ÅS DUDAS? CONSULTA A TU ASISTENTE
          </button>
        </div>
        
        <div class="about-image-container">
          <div class="about-decoration-circle circle-1"></div>
          <div class="about-decoration-circle circle-2"></div>
          <div class="about-decoration-circle circle-3"></div>
          <img 
            src="assets/images/ni√±aimagen.jpg" 
            alt="Ni√±a practicando ejercicios de habla"
            class="about-image">
        </div>
      </div>
    </section>

    <!-- Secci√≥n de estad√≠sticas r√°pidas - ACTUALIZADA -->
    <div class="quick-stats">
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-icon active-learning">üë•</div>
          <div class="stat-info">
            <h4>Aprendizaje Activo</h4>
            <p>Ejercicios interactivos adaptados a tu nivel</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon smart-tech">ü§ñ</div>
          <div class="stat-info">
            <h4>Tecnolog√≠a Inteligente</h4>
            <p>IA y detecci√≥n facial para guiarte</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon family-support">üë®‚Äçüë©‚Äçüëß</div>
          <div class="stat-info">
            <h4>Apoyo Familiar</h4>
            <p>Involucra a tu familia en tu progreso</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon fun-games">üéÆ</div>
          <div class="stat-info">
            <h4>Juegos Divertidos</h4>
            <p> Juegos terap√©uticos para practicar</p>
          </div>
        </div>
      </div>
    </div>

    <div class="motivational-message">
      <div class="message-emoji"></div>
      <h3>¬°Cada d√≠a eres mejor!</h3>
      <p>Recuerda: practicar un poquito cada d√≠a te ayuda a mejorar much√≠simo. ¬°T√∫ puedes!</p>
    </div>
  </main>
</div>

<!-- BOT√ìN FLOTANTE CON MENSAJE -->
<div class="floating-help-container">
  <div class="floating-message">
    Preguntas frecuentes
  </div>
  
  <button class="floating-mascot" 
          (click)="goToHelp()"
          style="position: relative !important; 
                 width: 60px !important; 
                 height: 60px !important; 
                 background: #25d366 !important; 
                 border: none !important;
                 border-radius: 50% !important; 
                 color: white !important; 
                 font-size: 2rem !important; 
                 cursor: pointer !important; 
                 z-index: 999999 !important; 
                 box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4) !important;
                 display: flex !important;
                 align-items: center !important;
                 justify-content: center !important;">
    ‚ùì
  </button>
</div>

<!-- MODALES -->
<app-faq-modal 
  [isVisible]="showFaqModal"
  (closeModal)="closeFaqModal()">
</app-faq-modal>

<app-logout-modal 
  *ngIf="showLogoutModal"
  (cancel)="onLogoutCancel()"
  (confirm)="onLogoutConfirm()">
</app-logout-modal>