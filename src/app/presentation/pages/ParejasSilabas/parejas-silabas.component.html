<div class="game-container">
  
  <!-- ============================================ -->
  <!-- PANTALLA DE INSTRUCCIONES -->
  <!-- ============================================ -->
  <div *ngIf="vistaActual === 'instrucciones'" class="instructions-screen">
    <!-- Header del juego -->
    <div class="game-header">
      <div class="header-content">
        <button class="btn-back" (click)="volverAlMenu()">
          <span class="back-icon">←</span>
          <span class="btn-text">Volver</span>
        </button>
        <div class="game-info">
          <h1>Parejas de Sílabas</h1>
          <p>Asocia cada imagen con su sílaba correcta</p>
        </div>
        <div class="game-stats"></div>
      </div>
    </div>

    <div class="instructions-card">
      <div class="instructions-header">
        <h2>Parejas de Sílabas</h2>
        <span class="difficulty-badge">Fácil</span>
      </div>

      <div class="instructions-content">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-text">
            <strong>Observa el emoji</strong>
            <p>En el centro verás una imagen grande que representa una palabra</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">2</div>
          <div class="step-text">
            <strong>Elige la sílaba correcta</strong>
            <p>Abajo verás varias sílabas disponibles. Encuentra la que corresponde a la imagen</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">3</div>
          <div class="step-text">
            <strong>Arrastra la sílaba</strong>
            <p>Arrastra la sílaba correcta hacia el área del emoji y suéltala allí</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">4</div>
          <div class="step-text">
            <strong>Completa todas las palabras</strong>
            <p>Practica con todas las sílabas disponibles</p>
          </div>
        </div>
      </div>

      <div class="tips-section">
        <h3>Consejos:</h3>
        <ul>
          <li>Piensa bien antes de arrastrar la sílaba</li>
          <li>Observa con atención el emoji para identificar la palabra</li>
          <li>Si te equivocas, no te preocupes, puedes intentar de nuevo</li>
        </ul>
      </div>

      <button class="btn-start" (click)="comenzarJuego()">
        Comenzar a Jugar
      </button>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- PANTALLA DE JUEGO -->
  <!-- ============================================ -->
  <div *ngIf="vistaActual === 'jugando'">
    <!-- Header con título y progreso -->
    <div class="game-header">
      <div class="header-content">
        <button class="btn-back" (click)="volverAlMenu()">
          <span class="back-icon">←</span>
          <span class="btn-text">Volver</span>
        </button>
        <h1 class="game-title">Parejas de Sílabas</h1>
        <!-- Contador de progreso -->
        <div class="progress-info" *ngIf="!juegoCompletado">
          <span class="nivel-info">{{ palabrasCompletadas }}/{{ totalPalabras }}</span>
        </div>
      </div>
    </div>

    <!-- Barra de progreso -->
    <div class="progress-section" *ngIf="!juegoCompletado">
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="progresoJuego"></div>
      </div>
      <p class="palabras-restantes">{{ palabrasRestantes }} palabras más</p>
    </div>

    <!-- Contenido del juego -->
    <div class="game-content" *ngIf="!juegoCompletado && palabraActual">
      
      <div class="game-layout">
        <!-- Zona superior: Drop Zone con el emoji -->
        <div class="top-section">
          <div 
            class="drop-zone"
            (dragover)="onDragOver($event)"
            (drop)="onDrop($event)">
            <div class="palabra-container">
              <div class="palabra-emoji">
                {{ palabraActual.imagen }}
              </div>
              <div class="instruccion">
                <p>Arrastra la sílaba correcta</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Zona inferior: Sílabas disponibles -->
        <div class="bottom-section">
          <div class="silabas-container">
            <div 
              *ngFor="let silaba of silabas"
              class="silaba-card"
              draggable="true"
              (dragstart)="onDragStart(silaba, $event)">
              {{ silaba }}
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Celebración entre palabras -->
    <div class="celebracion-overlay" *ngIf="mostrarCelebracion && !juegoCompletado">
      <div class="celebracion-card">
        <div class="success-icon">
          <svg viewBox="0 0 52 52" class="checkmark">
            <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
          </svg>
        </div>
        <h2 class="celebracion-title">¡Muy bien!</h2>
        <p class="celebracion-message">Respuesta correcta</p>
        <div class="progress-dots">
          <span class="dot active"></span>
          <span class="dot active"></span>
          <span class="dot active"></span>
        </div>
      </div>
    </div>

    <!-- Pantalla de juego completado -->
    <div class="game-completed" *ngIf="juegoCompletado">
      <div class="completion-card">
        <h2>¡Felicitaciones!</h2>
        <p class="completion-message">
          Completaste todas las sílabas
        </p>
        <p class="completion-submessage">
          Eres un campeón de las sílabas
        </p>
        <div class="completion-buttons">
          <button class="btn-reiniciar" (click)="reiniciarJuego()">
            Jugar de nuevo
          </button>
          <button class="btn-menu" (click)="volverAlMenu()">
            Menú principal
          </button>
        </div>
      </div>
    </div>
  </div>
</div>