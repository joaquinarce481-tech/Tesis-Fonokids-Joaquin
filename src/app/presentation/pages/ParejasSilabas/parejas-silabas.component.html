<div class="game-container">
  
  <!-- ============================================ -->
  <!-- PANTALLA DE INSTRUCCIONES -->
  <!-- ============================================ -->
  <div *ngIf="vistaActual === 'instrucciones'" class="instructions-screen">
    <!-- Header del juego -->
    <div class="game-header">
      <button class="btn-back" (click)="volverAlMenu()">
        <span class="icon">ğŸ </span>
        <span class="btn-text">Volver</span>
      </button>
      <div class="game-info">
        <h1>ğŸ¯ Parejas de SÃ­labas</h1>
        <p>Asocia cada imagen con su sÃ­laba correcta</p>
      </div>
      <div class="game-stats"></div>
    </div>

    <div class="instructions-card">
      <div class="instructions-header">
        <h2>ğŸ¯ Parejas de SÃ­labas</h2>
        <span class="difficulty-badge">FÃ¡cil</span>
      </div>

      <div class="instructions-content">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-text">
            <strong>Observa el emoji</strong>
            <p>En el centro verÃ¡s una imagen grande que representa una palabra</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">2</div>
          <div class="step-text">
            <strong>Elige la sÃ­laba correcta</strong>
            <p>Abajo verÃ¡s varias sÃ­labas disponibles. Encuentra la que corresponde a la imagen</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">3</div>
          <div class="step-text">
            <strong>Arrastra la sÃ­laba</strong>
            <p>Arrastra la sÃ­laba correcta hacia el Ã¡rea del emoji y suÃ©ltala allÃ­</p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">4</div>
          <div class="step-text">
            <strong>Completa todos los niveles</strong>
            <p>Practica con todas las familias de sÃ­labas: P, M, T, S y L</p>
          </div>
        </div>
      </div>

      <div class="tips-section">
        <h3>ğŸ’¡ Consejos:</h3>
        <ul>
          <li>âœ“ Piensa bien antes de arrastrar la sÃ­laba</li>
          <li>âœ“ Observa con atenciÃ³n el emoji para identificar la palabra</li>
          <li>âœ“ Si te equivocas, Â¡no te preocupes! Puedes intentar de nuevo</li>
          <li>âœ“ Completa todas las palabras para pasar al siguiente nivel</li>
        </ul>
      </div>

      <button class="btn-start" (click)="comenzarJuego()">
        ğŸ® Comenzar a Jugar
      </button>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- PANTALLA DE JUEGO -->
  <!-- ============================================ -->
  <div *ngIf="vistaActual === 'jugando'">
    <!-- Header con tÃ­tulo y progreso -->
    <div class="game-header">
      <button class="btn-back" (click)="volverAlMenu()">
        <span class="icon">â†</span> Volver
      </button>
      <h1 class="game-title">ğŸ¯ Parejas de SÃ­labas ğŸ¯</h1>
      <div class="progress-info" *ngIf="nivelActual">
        <span class="nivel-info">Nivel {{ nivelActualNumero }}/{{ totalNiveles }}</span>
      </div>
    </div>

    <!-- Barra de progreso del nivel -->
    <div class="progress-bar-container" *ngIf="nivelActual && !nivelCompletado">
      <div class="progress-bar" [style.width.%]="progresoNivel"></div>
    </div>

    <!-- TÃ­tulo del nivel actual -->
    <div class="nivel-titulo" *ngIf="nivelActual && !nivelCompletado && !juegoCompletado">
      <h2>{{ nivelActual.titulo }}</h2>
      <p class="palabras-restantes">{{ palabrasRestantes }} palabras mÃ¡s</p>
    </div>

    <!-- Contenido del juego - Layout mejorado -->
    <div class="game-content" *ngIf="!nivelCompletado && !juegoCompletado && palabraActual">
      
      <div class="game-layout">
        <!-- Zona superior: Drop Zone con el emoji -->
        <div class="top-section">
          <div 
            class="drop-zone"
            (dragover)="onDragOver($event)"
            (drop)="onDrop($event)">
            <div class="palabra-container">
              <div class="palabra-emoji">
                {{ palabraActual.imagen }}
              </div>
              <div class="instruccion">
                <p>ğŸ‘† Â¡Arrastra la sÃ­laba correcta!</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Zona inferior: SÃ­labas disponibles -->
        <div class="bottom-section">
          <div class="silabas-container">
            <div 
              *ngFor="let silaba of silabas"
              class="silaba-card"
              draggable="true"
              (dragstart)="onDragStart(silaba, $event)">
              {{ silaba }}
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- CelebraciÃ³n entre palabras -->
    <div class="celebracion-overlay" *ngIf="mostrarCelebracion && !nivelCompletado">
      <div class="celebracion-content">
        <div class="celebracion-emoji">ğŸ‰</div>
        <h2>Â¡Excelente!</h2>
        <p>Â¡Muy bien hecho!</p>
      </div>
    </div>

    <!-- Pantalla de nivel completado -->
    <div class="nivel-completed" *ngIf="nivelCompletado && !juegoCompletado">
      <div class="completion-card">
        <div class="completion-emoji">ğŸŒŸ</div>
        <h2>Â¡Nivel Completado!</h2>
        <p class="completion-message" *ngIf="nivelActual">
          Â¡Dominaste la familia de la {{ nivelActual.consonante }}!
        </p>
        <div class="completion-buttons">
          <button class="btn-siguiente-nivel" (click)="siguienteNivel()">
            <span class="icon">â†’</span>
            Siguiente nivel
          </button>
        </div>
      </div>
    </div>

    <!-- Pantalla de juego completado -->
    <div class="game-completed" *ngIf="juegoCompletado">
      <div class="completion-card">
        <div class="completion-emoji">ğŸ†</div>
        <h2>Â¡Felicitaciones!</h2>
        <p class="completion-message">
          Â¡Completaste todas las familias de sÃ­labas!
        </p>
        <p class="completion-submessage">
          Â¡Eres un campeÃ³n de las sÃ­labas! ğŸŒŸ
        </p>
        <div class="completion-buttons">
          <button class="btn-reiniciar" (click)="reiniciarJuego()">
            <span class="icon">ğŸ”„</span>
            Jugar de nuevo
          </button>
          <button class="btn-menu" (click)="volverAlMenu()">
            <span class="icon">ğŸ </span>
            MenÃº principal
          </button>
        </div>
      </div>
    </div>
  </div>
</div>