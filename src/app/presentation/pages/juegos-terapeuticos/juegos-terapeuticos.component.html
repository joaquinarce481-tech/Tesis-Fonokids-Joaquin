<!-- juegos-terapeuticos.component.html -->

<div class="juegos-container">
  
  <!-- Vista principal: Selecci√≥n de categor√≠as -->
  <main class="juegos-seccion-menu" *ngIf="!categoriaSeleccionada">
    
    <!-- Bot√≥n volver al dashboard -->
    <button class="btn-volver-dashboard" (click)="volverAlDashboard()">
      <span class="icono-flecha">‚Üê</span>
      <span class="texto-btn">Volver al Dashboard</span>
    </button>

    <!-- Header con imagen de fondo -->
    <div class="header-juegos-nuevo">
      <div class="header-background">
        <div class="header-overlay"></div>
        <div class="header-content">
          <h1 class="seccion-titulo-nuevo">üéÆ Juegos Terap√©uticos</h1>
          <p class="seccion-descripcion-nuevo">Selecciona una categor√≠a para comenzar a jugar</p>
        </div>
      </div>
    </div>

    <!-- Grid de categor√≠as -->
    <div class="categorias-grid">
      <div 
        *ngFor="let categoria of categorias"
        class="categoria-card"
        [ngClass]="'bg-gradient-' + categoria.color"
        (click)="seleccionarCategoria(categoria)">
        
        <!-- Imagen de la categor√≠a -->
        <div class="categoria-imagen-container">
          <img 
            [src]="'assets/images/' + categoria.imagen" 
            [alt]="categoria.titulo"
            class="categoria-imagen"
            (error)="onImageError($event, categoria)">
        </div>
        
        <!-- Contenido -->
        <div class="categoria-contenido">
          <h3>{{ categoria.titulo }}</h3>
          <p class="categoria-subtitulo">{{ categoria.subtitulo }}</p>
          <p class="categoria-descripcion">{{ categoria.descripcion }}</p>
          
          <!-- Contador de juegos -->
          <div class="categoria-juegos-count">
            <div class="count-badge">
              <div class="count-numero">{{ categoria.juegos.length }}</div>
              <div class="count-texto">Juegos</div>
            </div>
          </div>
          
          <!-- Bot√≥n jugar -->
          <button class="play-button">
            <span class="play-icon">‚ñ∂</span>
            <span>Jugar</span>
          </button>
        </div>
      </div>
    </div>

  </main>

  <!-- Vista de juegos por categor√≠a -->
  <main class="main-content" *ngIf="categoriaSeleccionada">
    <!-- Bot√≥n volver a categor√≠as -->
    <button class="btn-volver-dashboard" (click)="volverACategorias()">
      <span class="icono-flecha">‚Üê</span>
      <span class="texto-btn">Volver a Categor√≠as</span>
    </button>

    <div class="categoria-selected" 
         *ngFor="let categoria of categorias" 
         [ngStyle]="categoria.id === categoriaSeleccionada ? {} : {display: 'none'}">
      
      <!-- Header mejorado con fondo y overlay -->
      <div class="categoria-header-modern" [ngClass]="'header-' + categoria.id">
        <div class="header-overlay-modern"></div>
        <div class="header-content-modern">
          <div class="header-text-content">
            <h1 class="categoria-titulo-modern">{{ categoria.titulo.toUpperCase() }}</h1>
            <p class="categoria-descripcion-modern">{{ categoria.descripcion }}</p>
          </div>
        </div>
      </div>

      <!-- Grid de juegos mejorado -->
      <div class="juegos-grid-modern">
        <div 
          *ngFor="let juego of categoria.juegos"
          class="juego-card-modern"
          [ngClass]="'card-' + categoria.id"
          (click)="jugarJuego(juego, categoria)">
          
          <!-- Imagen del juego -->
          <div class="juego-imagen-container">
            <div class="juego-imagen" [ngClass]="'bg-' + categoria.id + '-' + juego.id">
              <div class="imagen-overlay"></div>
              <div class="imagen-emoji">{{ juego.emoji }}</div>
            </div>
          </div>
          
          <!-- Contenido del juego -->
          <div class="juego-contenido-modern">
            <h3 class="juego-nombre">{{ juego.nombre }}</h3>
            <p class="juego-descripcion-text">{{ juego.descripcion }}</p>
            
            <!-- Footer con info y bot√≥n -->
            <div class="juego-footer-modern">
              <div class="juego-meta">
                <span class="juego-dificultad-badge" [ngClass]="getDificultadColor(juego.dificultad)">
                  {{ getDificultadTexto(juego.dificultad) }}
                </span>
                <span class="juego-duracion">
                  <i class="fas fa-clock"></i> {{ getDuracion(juego.dificultad) }}
                </span>
              </div>
              
              <button class="btn-jugar-modern" [ngClass]="'btn-' + categoria.id">
                <span class="play-icon-modern">‚ñ∂</span>
                <span class="btn-text">Jugar</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>